# 14 컬렉션과 부가 기능
- 이 챕터에서 다룰 내용
  - 컬렉션 : 다양한 컬렉션과 특징을 설명 
  - 컨버터 : 엔티티의 데이터를 변환해서 데이터베이스에 저장한다
  - 리스너 : 엔티티에서 발생한 이벤트를 처리한다
  - 엔티티 그래프 : 엔티티를 조회할 때 연관된 엔티티들을 선택해서 함께 조회한다
 
 # 14.1 컬렉션
 - JPA 는 자바에서 기본으로 제공하는 `Collection`, `List`, `Set`, `Map` 컬렉션을 지원하고, 다음과 같은 경우에 사용가능하다
  - `@OneToMany`, `@ManyToMany`을 사용해서 일대다나 다대다 엔티티 관계를 매핑할 때
  - `@ElementCollection`을 사용해서 값 타입을 하나 이상 보관할 때
  
 ## 14.1.1 JPA와 컬렉션
 - 엔티티를 영속상태로 만들면 컬렉션 값 타입이 `ArrayList` 에서 하이버네이트가 제공하는 `PersistentBag` 타입으로 변경됨
 - 이런 특징 때문에 컬렉션 사용시 즉시 초기화해서 사용하는것을 권장

## 14.1.2 Collection, List
- 중복을 허용하는 컬렉션이고, PersistentBag을 래퍼 컬렉션으로 사용한다
- ArrayList로 초기화하면 된다
- 같은 엔티티가 있는지 찾거나 삭제할 때는 equals() 메소드를 사용한다
- 중복을 비교하지 않기에 단순히 저장만 하면 돼서 엔티티를 추가해도 지연 로딩된 컬렉션을 초기화하지 않는다

## 14.1.3 Set
- 중복을 허용하지 않는 컬렉션으로, PersistentSet을 래퍼로 사용
- HashSet으로 초기화하면 된다
- add() 메소드로 추가할 때마다 equals() 메소드로 같은 객체가 있는지 비교한다. 추가에 실패시 false 반환
- 해시 알고리즘을 사용하므로 hashcode() 도 함게 사용해서 비교한다
- 엔티티를 추가할 때 지연 로딩된 컬렉션을 초기화한다

## 14.1.4 List + @OrderColumn
