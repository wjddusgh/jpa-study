# 5. 웹 서버

## 5.1 다채로운 웹 서버
- 아주 다양하지만, 모두 리소스에 대한 http 요청 받아서 클라이언트에게 콘텐츠를 돌려준다
- 다목적 소프트웨어 웹서버
  - 표준 컴퓨터 시스템에서 동작
  - 아파치, 직소, nginx 등의 오픈소스 혹은 상용 소프트웨어 사용 가능   
- 임베디드 웹서버
  - 일반 기기를 간편하게 관리할수 있게 해주는 용도
## 5.3 진짜 웹 서버가 하는 일
1. 커넥션 맺기 : 클라이언트 접속 받기(원치 않는 클라는 닫는다)
2. 요청 받기 : http 요청 메시지를 네트워크로부터 읽음
3. 요청 처리 : 메시지를 통해 행동을 취함
4. 리소스 접근 : 메시지 행동에 필요한 리소스를 찾는다
5. 응답 만듦 : 올바른 헤더를 포함한 http 응답 메시지 생성
6. 응답 보냄 : 클라이언트에게 응답 보냄
7. 트랜잭션 로그로 남김 : 로그파일에 트랜잭션 완료 기록 남긴다

## 5.4 단계 1: 클라이언트 커넥션 수락
- 커넥션이 맺어지면 서버는 커넥션 목록에 추가하고 데이터 지켜볼 준비를 한다
- 대부분 웹서버는 역방향 dns 사용해서 클라이언트의 ip 주소를 호스트명으로 변환할수 있다
- 근데 이는 느리다
- ident 는 웹서버 로깅에 유용하지만, 대부분의 클라이언트는 실행하지 않기에 사용이 어렵다

## 5.5 단계2 : 요청 메시지 수신
- 요청줄 파싱 : 스페이스 단위로 분리되어 있고, CRLF 줄바꿈 문자열로 끝난다
- 메시지 헤더 : 여러 메시지 헤더들을 읽고, 각각은 CRLF로 끝난다
- 요청 본문 : 있을수도, 없을수도 있다. content-length 헤더로 정의된다
