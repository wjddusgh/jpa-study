# 14. 보안 HTTP
## 14.1 HTTP를 안전하게 만들기
### HTTPS
- 가장 인기있음
- https 사용시 모든 http 요청,응답 데이터는 네트워크로 보내지기 전에 암호화됨
- 어려운 인코딩, 디코딩 작업은 ssl 라이브러리 안에서 일어나기에 크게 할일은 없다

## 14.4 공개키 암호법
- 두 개의 비대칭 키를 사용
- 암호화 키는 공개해놓고, 복호화 키는 호스트만 가짐
- RSA 가 이것
- 대신 좀 느려서, 대칭 키 암호를 교환할 때 흔히 쓰이고, 이후엔 빠른 대칭 키 암호화로 진행

## 14.5 디지털 서명
- 메시지 작성자 누구인지 알려줌(체크섬 으로)
- 메시지 위조 방지(체크섬 계산을 통해 위조됐는지 확인)

## 14.6 디지털 인증서
- 신뢰할 수 있는 기관으로 부터 보증받은 것
- 디지털인증서 내부
  - 대상의 이름(사람,서버,조직 등)
  - 유효 기간
  - 인증서 발급자(누가 보증하나)
  - 인증서 발급자의 디지털 서명
- 디지털 인증서는 전 세계적인 단일 표준이 없어서, 다들 미묘하게 다르다

## 14.7 HTTPS의 세부사항
- http + 대칭, 비대칭 인증서 기반 암호 기법
- ssl 은 바이너리 프로토콜이기에 http와는 다른 포트로 전달해야함(기본: 443)
### SSL 핸드셰이크
- 프로토콜 버전 번호 교환
- 양쪽이 알고있는 암호 선택
- 양쪽의 신원 인증
- 채널을 암호화하기 위한 임시 세션 키 생성
### 서버 인증서
- ssl 은 서버 인증서, 클라이언트 인증서를 서로 교환하는 상호 인증 지원함
- 오늘날 클라이언트 인증서는 웹에선 잘 안쓰임
- https 트랜잭션은 항상 서버 인증서를 요구함
- 서버인증서는 X.509 v3 에서 파생된 인증서
### 사이트 인증서 검사
- 날짜 검사
- 서명자 신뢰도 검사 : CA(인증기관)을 통해 검사
- 서명 검사 : 서명기관 공개키로 체크섬 비교해서 무결성 검사함
- 사이트 신원 검사
### 가상 호스팅과 인증서
- 가상 호스팅은 호스트명이 서버인증서와 다를 수 있기에 경고가 뜰 수 있다
- 이를 피하기 위해 서버 소유자는 보안 트랜잭션 시작하는 모든 사용자를 서버 인증서에 맞게끔 리다이렉트한다

## 14.8 진짜 HTTPS 클라이언트
### OpenSSL
- 가장 인기있는 오픈소스 구현체
- SSLeay 라이브러리를 계승함

## 14.9 프록시를 통한 보안 트래픽 터널링
- 클라이언트가 서버로 보낼 데이터를 서버의 공개키로 암호화한다면, 중간의 웹 프록시 서버는 더이상 http 헤더를 읽을 수 없다
- 그러면 프록시는 요청을 어디로 보낼지 모르게 된다
- HTTPS SSL 터널링 프로토콜 : 클라이언트가 프록시에게 어디에 접소갛려고 하는지 말해주는 방법
  - 자신이 연결하고자 하는 안전한 호스트, 포트를 암호화 전에 평문으로 말해줌
  - CONNECT 확장 메서드를 이용해 보냄
  - 완료 시, 클라이언트 와 서버 사이의 직접적으로 데이터 오갈수 있는 터널 만듦 
