# 16. 국제화
## 16.1 국제적인 컨텐츠를 다루기 위해 필요한 HTTP 지원
- http 에서 엔티티 본문은 그저 bit들이기에 어떤 언어든 보낼 수 있다
- 서버는 클라이언트에게 각 문서의 문자, 언어를 알려줘서 잘 처리할 수 있도록 한다
  - HTTP Content-Type charset 매개변수
  - Content-Language 헤더
- 클라이언트는 자신이 어떤 인코딩 알고리즘, 언어를 이해하는지 헤더에 실어 알려준다
  - Accept-Charset
  - Accept-Language
  - 각 언어에 품질인자(기본값 1)를 매개변수로 적어서 언어별 우선순위를 정할 수 있다

## 16.2 문자집합과 HTTP
### Charset 은 글자 -> 비트 변환 인코딩이다
- 차셋 태그는 IANA가 관리함
- 몇몇 문자 인코딩은(UTF-8 등) 글자당 비트수가 일정하지 않아 더 복잡한 가변길이 코드다(중국어, 일본어마냥 표의문자 때문인듯)
### 문자집합과 인코딩은 어떻게 동작하는가
- 문자의 시각적인 표현에서 의미를 분리해내고, HTTP 는 문자 데이터, 그에맞는 차셋 전송에만 관심을 갖는다
- 나머지 글꼴 같은건 사용자가 알아서 해야한다
### MIME 차셋
- 특정 문자 인코딩과 특정 코딩된 문자집합의 결합
- IANA에 등록되어 있음
### Content-Type charset 헤더와 META 태그
- 일반적으로 Content-Type 헤더에 태그를 실어서 보내는데, 만약 없으면 소프트웨어가 실제 텍스트를 스캐닝하여 문자 인코딩을 추측한다
## 16.3 다중언어 문자 인코딩에 대한 지침
### 문자집합 용어
- 문자 : 글쓰기의 최소 단위, 유일한 이름을 부여하기 위한 표준화된 이름 집합이 개발되어옴
- 글리프 : 하나의 글자를 표현하기 위한 획,패턴 같은 시각적 형태
- 코딩된 문자 : 글자에 할당된 유일한 숫자
- 코드 공간 : 문자 코드 값으로 사용하려고 계획해둔 정수의 범위
- 코드 너비 : 각 문자코드의 비트 개수
- 사용가능 문자집합 : 글자들에 대한 특정한 작업 집합
- 코딩된 문자집합 : 사용가능 문자집합을 코드에 대응시킨 것의 집합
- 문자 인코딩 구조 : 문자코드들을 연속된 비트로 인코딩하는 알고리즘
### 차셋은 형편없는 이름이다
- 엄밀히 말해 MIME 차셋 태그는 문자집합을 의미하는게 아니다
- 그래서 정확히 무엇을 정의한건지 주의를 기울여 봐라
### 문자
- 문자는 글꼴, 스타일에 독립적이란게 중요하다
- 서로 다르게 생긴 여러 문자가 문자코드로는 같은것일 수 있다는말
- 글리프와 문자는 헷갈리면 안된다(문자는 유일하고 추상화된 언어의 요소, 글리프는 글자를 그리는 방법)
- 그래서 같은 문자코드 여도 글리프는 다를 수 있다

### 코딩된 문자집합
- US-ASCII : 모든 문자집합의 어머니
  - 7비트로 코드공간 표현
  - HTTP 메시지는 이걸 사용함
- iso-8859
  - US-ASCII 를 확장한 8비트로 표현
  - 국제적인 글쓰기를 위해 확장
  - iso-8859-1 은 Latin1로도 부르며 HTML을 위한 기본 문자집합
- JIS X
  - 0201 : 일본어 가타가나 반각문자를 더해 확장한 극단적으로 작은 문자집합
  - 0208 : 최초의 멀티바이트 문자집합, 일본식 한자 6879개 정의함
- UCS : 국제 문자 세트, 모든 글자를 하나의 코딩된 문자집합으로 만드려는 표준

### 문자 인코딩 구조
- 구조는 세 종류로 분류
  -  고정폭 : 고정된 길이의 비트로 표현, 빠른 처리지만 공간 낭비 우려
  -  가변폭(비모달) : 자주 사용하는 글자의 비트길이 줄일 수 있고, 국제 문자는 여러 바이트 사용하도록 함으로 8비트 문자집합과의 호환성 유지 가능
  -  가변폭(모달) : escape 패턴 사용해서 처리는 복잡하지만, 복잡한 표기 체계를 효과적으로 지원함
- 문자 인코딩의 종류
  - 8비트 : 256개 문자 코드 범위에 대한 문자집합만을 지원
  - UTF-8 : UCS Transformation Format 의 약자로, 비모달 가변길이 인코딩 사용

## 16.4 언어 태그와 HTTP
- 영어(en), 독일어(de), 한국어(ko) 같은 것
- zh-xiang, en-US 처럼 언어의 방언도 표현 가능
### 서브태그
- `-`로 서브태그를 구분 (ex. sgn-US-MA)
- 첫번째 서브태그는 주 서브태그, 표준화 되어있음
- 두번째 서브태그는 선택적, 자신만의 이름 표준 따름
- 세번재부터는 변종
### 대소문자의 구분 및 표현
- 태그는 대소문자 구분 안함
- 하지만 관용적으로 언어는 소문자, 나라는 대문자 사용

## 16.5 국제화된 URI
- 오늘날 URI 는 국제화 그다지 지원안함
- URI 는 US-ASCII 의 부분집합으로 구성됨
### 국제적 가독성 vs 의미 있는 문자들
- 모든 곳에서 쓸 수 있게 아주 제한적인 작은 문자집합(라틴 알파벳 + 숫자 + 몇개의 특수문자) 만 사용
### 이스케이핑과 역이스케이핑
- 예약된 문자나 지원하지 않는 글자들을 안전하게 URI 에 넣는법
- `%`+ 16진수글자(US-ASCII 문자의 코드) 둘 로 이루어진 세글자 문자열
- ex. 스페이스 는 %20
- 언이스케이핑은 두번 되지 않도록 조심해야한다(데이터 손실발생)
- ASCII 코드범위(0~127)을 넘어선 확장문자(128~255)를 이스케이핑하면 안된다
